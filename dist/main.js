!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var r=function(e,n,t,r){return new(t||(t=Promise))((function(o,u){function i(e){try{c(r.next(e))}catch(e){u(e)}}function a(e){try{c(r.throw(e))}catch(e){u(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,a)}c((r=r.apply(e,n||[])).next())}))},o=function(e,n){var t,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],r=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},u=function(e){return r(void 0,void 0,void 0,(function(){var n,t;return o(this,(function(r){switch(r.label){case 0:return n=e.lat,t=e.lng,[4,fetch("https://www.vegguide.org/search/by-lat-long/"+n+","+t)];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()]}}))}))},i=function(e,n,t,r){return new(t||(t=Promise))((function(o,u){function i(e){try{c(r.next(e))}catch(e){u(e)}}function a(e){try{c(r.throw(e))}catch(e){u(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,a)}c((r=r.apply(e,n||[])).next())}))},a=function(e,n){var t,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],r=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},c={name:"London",lat:51.5033,lng:-.1195},l={name:"Paris",lat:48.8566,lng:2.3522},s={name:"Seoul",lat:37.5665,lng:126.978},f=function(e,n){document.getElementById("restaurants").innerHTML="<h2>Showing restaurants in: "+n.name+"</h2><p>1: "+e[0].name+": "+e[0].short_description+" </p><p>2: "+e[1].name+": "+e[1].short_description+"</p><p>3: "+e[2].name+": "+e[2].short_description+"</p><p>4. "+e[3].name+": "+e[3].short_description+"</p><p>5. "+e[4].name+": "+e[4].short_description+"</p>"};u(c).then((function(e){console.log(e);var n=e.entries.splice(0,5);console.log(n),f(n,c)}));var p=function(e){var n,t;u(e).then((function(t){n=t.entries.splice(0,5),f(n,e)})).then((function(){return(e=n[0],i(void 0,void 0,void 0,(function(){var n;return a(this,(function(t){switch(t.label){case 0:return n=e.address1+"+"+e.address2+"+"+e.country,[4,fetch("https://maps.googleapis.com/maps/api/geocode/json?address="+n+"&key=AIzaSyCVF0MR-UK7X5IRbYzxSLM6B921NbZoFnM")];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}}))}))).then((function(e){return console.log(e.results[0].geometry.location),t=e.results[0].geometry.location}));var e})).then((function(){return function(e,n,t){var r=new google.maps.Map(document.getElementById("map"),{zoom:11,center:e});new google.maps.Marker({position:t,map:r,icon:"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=1|FE6256|000000"});return r}(e,0,t)}))};p(c),document.getElementById("paris-button").addEventListener("click",(function(){return p(l)})),document.getElementById("london-button").addEventListener("click",(function(){return p(c)})),document.getElementById("seoul-button").addEventListener("click",(function(){return p(s)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21hcHMvbWFwcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdmVnZ2llLWFwaS92ZWdnaWUtZGF0YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFwcy9nZW9jb2Rlci50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImdldFZlZ2dpZVJlc3RhdXJhbnRzIiwibG9jYXRpb24iLCJsYXRpdHVkZSIsImxhdCIsImxvbmdpdHVkZSIsImxuZyIsImZldGNoIiwianNvbiIsIkxvbmRvbiIsIlBhcmlzIiwiU2VvdWwiLCJ1cGRhdGVIdG1sIiwidG9wUmVzdGF1cmFudHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwic2hvcnRfZGVzY3JpcHRpb24iLCJ0aGVuIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJlbnRyaWVzIiwic3BsaWNlIiwiZ2VuZXJhdGVOZXdNYXAiLCJyZXN0T25lIiwicmVzdGF1cmFudCIsInNlYXJjaFN0cmluZyIsImFkZHJlc3MxIiwiYWRkcmVzczIiLCJjb3VudHJ5IiwicmVzdWx0cyIsImdlb21ldHJ5IiwiY29vcmRpbmF0ZXMiLCJyZXN0YXVyYW50cyIsIm1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJ6b29tIiwiY2VudGVyIiwiTWFya2VyIiwicG9zaXRpb24iLCJpY29uIiwiaW5pdE1hcCIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxV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USxLQUFNLGtGQUMvRixPQUFPUixFRTJCVVMsQ0FBUTFDLEVBQVVXLEVBQWdCWSxPQUlyREQsRUFBZWYsR0FJS0ssU0FBU0MsZUFBZSxnQkFDaEM4QixpQkFBaUIsU0FBUyxXQUFNLE9BQUFyQixFQUFlZCxNQUV0Q0ksU0FBU0MsZUFBZSxpQkFDaEM4QixpQkFBaUIsU0FBUyxXQUFNLE9BQUFyQixFQUFlZixNQUV4Q0ssU0FBU0MsZUFBZSxnQkFDaEM4QixpQkFBaUIsU0FBUyxXQUFNLE9BQUFyQixFQUFlYiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHt9IGZyb20gJ2dvb2dsZW1hcHMnO1xyXG5pbXBvcnQgeyBzdHlsZXMgfSBmcm9tICcuL21hcHMtZGF0YSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElMb2NhdGlvbiB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGxhdDogbnVtYmVyLFxyXG4gIGxuZzogbnVtYmVyXHJcbn1cclxuXHJcbi8vSW5pdGlhbGlzaW5nIGEgbWFwIGZ1bmN0aW9uXHJcblxyXG5leHBvcnQgY29uc3QgaW5pdE1hcCA9IChjb29yZGluYXRlczogSUxvY2F0aW9uLCByZXN0YXVyYW50cywgcmVzdE9uZSk6IGdvb2dsZS5tYXBzLk1hcCA9PiB7XHJcbiAgbGV0IG1hcDogZ29vZ2xlLm1hcHMuTWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwgXHJcbiAgICB7IHpvb206IDExLCBcclxuICAgICAgY2VudGVyOiBjb29yZGluYXRlc1xyXG4gICAgfVxyXG4gICk7XHJcbiAgbGV0IG1hcmtlck9uZTogZ29vZ2xlLm1hcHMuTWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7cG9zaXRpb246IHJlc3RPbmUsIG1hcDogbWFwLCBpY29uOiAnaHR0cDovL2NoYXJ0LmFwaXMuZ29vZ2xlLmNvbS9jaGFydD9jaHN0PWRfbWFwX3Bpbl9sZXR0ZXImY2hsZD0xfEZFNjI1NnwwMDAwMDAnfSk7XHJcbiAgcmV0dXJuIG1hcDtcclxufSIsImltcG9ydCB7IElMb2NhdGlvbiB9IGZyb20gXCIuLi9tYXBzL21hcHNcIjtcclxuXHJcbi8vIFJlcXVlc3QgZnVudGNpb24gdXNpbmcgdGhlIFZlZyBHdWlkZSBBUElcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRWZWdnaWVSZXN0YXVyYW50cyA9IGFzeW5jIChsb2NhdGlvbjpJTG9jYXRpb24pOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbGF0aXR1ZGUgPSBsb2NhdGlvbi5sYXQ7XHJcbiAgICBjb25zdCBsb25naXR1ZGUgPSBsb2NhdGlvbi5sbmc7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL3d3dy52ZWdndWlkZS5vcmcvc2VhcmNoL2J5LWxhdC1sb25nLyR7bGF0aXR1ZGV9LCR7bG9uZ2l0dWRlfWApO1xyXG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG4vLyBTRUUgbWFpbi50cyBmb3IgcmVwb25zZVxyXG5cclxuXHJcbiIsImltcG9ydCB7IElMb2NhdGlvbiwgaW5pdE1hcCB9IGZyb20gJy4vbWFwcy9tYXBzJztcclxuaW1wb3J0IHsgZ2V0VmVnZ2llUmVzdGF1cmFudHMgfSBmcm9tICcuL3ZlZ2dpZS1hcGkvdmVnZ2llLWRhdGEnO1xyXG5pbXBvcnQgeyBnZXRMYXRMb25nIH0gZnJvbSAnLi9tYXBzL2dlb2NvZGVyJztcclxuXHJcbi8vbG9jYXRpb25zXHJcbmNvbnN0IExvbmRvbjogSUxvY2F0aW9uID0ge25hbWU6IFwiTG9uZG9uXCIsIGxhdDogNTEuNTAzMywgbG5nOiAtMC4xMTk1fTtcclxuY29uc3QgUGFyaXM6IElMb2NhdGlvbiA9IHtuYW1lOiBcIlBhcmlzXCIsIGxhdDogNDguODU2NiwgbG5nOiAyLjM1MjJ9O1xyXG5jb25zdCBTZW91bDogSUxvY2F0aW9uID0ge25hbWU6IFwiU2VvdWxcIiwgbGF0OiAzNy41NjY1LCBsbmc6IDEyNi45NzgwfTtcclxuXHJcbi8vZnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBodG1sIHdpdGggbmV3IHJlc3RhdXJhbnRzXHJcbmNvbnN0IHVwZGF0ZUh0bWwgPSAodG9wUmVzdGF1cmFudHMsIGxvY2F0aW9uOklMb2NhdGlvbikgPT4ge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN0YXVyYW50c1wiKS5pbm5lckhUTUwgPSBgPGgyPlNob3dpbmcgcmVzdGF1cmFudHMgaW46ICR7bG9jYXRpb24ubmFtZX08L2gyPjxwPjE6ICR7dG9wUmVzdGF1cmFudHNbMF0ubmFtZX06ICR7dG9wUmVzdGF1cmFudHNbMF0uc2hvcnRfZGVzY3JpcHRpb259IDwvcD48cD4yOiAke3RvcFJlc3RhdXJhbnRzWzFdLm5hbWV9OiAke3RvcFJlc3RhdXJhbnRzWzFdLnNob3J0X2Rlc2NyaXB0aW9ufTwvcD48cD4zOiAke3RvcFJlc3RhdXJhbnRzWzJdLm5hbWV9OiAke3RvcFJlc3RhdXJhbnRzWzJdLnNob3J0X2Rlc2NyaXB0aW9ufTwvcD48cD40LiAke3RvcFJlc3RhdXJhbnRzWzNdLm5hbWV9OiAke3RvcFJlc3RhdXJhbnRzWzNdLnNob3J0X2Rlc2NyaXB0aW9ufTwvcD48cD41LiAke3RvcFJlc3RhdXJhbnRzWzRdLm5hbWV9OiAke3RvcFJlc3RhdXJhbnRzWzRdLnNob3J0X2Rlc2NyaXB0aW9ufTwvcD5gXHJcbn1cclxuXHJcbi8vIEdldCB0aGUgcmVzdGF1cmFudHMgZm9yIGEgc3BlY2lmaWMgYXJlYVxyXG5nZXRWZWdnaWVSZXN0YXVyYW50cyhMb25kb24pLnRoZW4oKGRhdGEpID0+IHtcclxuXHJcbiAgICAvLyBSZXNwb25zZSBkYXRhIGZyb20gdGhlIHZlZ2dpZSByZXN0YXJhbnRzIEFQSVxyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICBjb25zdCB0b3BSZXN0YXVyYW50cyA9IGRhdGEuZW50cmllcy5zcGxpY2UoMCw1KTtcclxuICAgIGNvbnNvbGUubG9nKHRvcFJlc3RhdXJhbnRzKTtcclxuXHJcbiAgICAvL3VwZGF0aW5nIGh0bWwgb24gdGhlIHBhZ2VcclxuICAgIHVwZGF0ZUh0bWwodG9wUmVzdGF1cmFudHMsIExvbmRvbik7XHJcbn0pO1xyXG5cclxuLy9mdW5jdGlvbiB0byBnZW5lcmF0ZSBtYXAgYW5kIHVwZGF0ZSB0aGUgaHRtbCBmb3IgYSBuZXcgbG9jYXRpb246XHJcblxyXG5jb25zdCBnZW5lcmF0ZU5ld01hcCA9IChsb2NhdGlvbjogSUxvY2F0aW9uKSA9PiB7XHJcbiAgICBsZXQgdG9wUmVzdGF1cmFudHM7XHJcbiAgICBsZXQgcmVzdE9uZTtcclxuICAgIC8vMTogZ2V0IHRoZSBsaXN0IG9mIHJlc3RhdXJhbnRzXHJcbiAgICBnZXRWZWdnaWVSZXN0YXVyYW50cyhsb2NhdGlvbikudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIC8vIFJlc3BvbnNlIGRhdGEgZnJvbSB0aGUgdmVnZ2llIHJlc3RhcmFudHMgQVBJXHJcbiAgICAgICAgdG9wUmVzdGF1cmFudHMgPSBkYXRhLmVudHJpZXMuc3BsaWNlKDAsNSk7XHJcbiAgICBcclxuICAgICAgICAvL3VwZGF0aW5nIGh0bWwgb24gdGhlIHBhZ2VcclxuICAgICAgICB1cGRhdGVIdG1sKHRvcFJlc3RhdXJhbnRzLCBsb2NhdGlvbik7XHJcblxyXG4gICAgICAgIC8vZ2VvY29kZXIgYXBpIHJlcXVlc3RcclxuICAgICAgICAvLzI6IGdldCB0aGUgbGF0IGFuZCBsb25nIG9mIHRoaXMgbGlzdCBvZiByZXN0YXVyYW50c1xyXG4gICAgfSkudGhlbigoKSA9PiBnZXRMYXRMb25nKHRvcFJlc3RhdXJhbnRzWzBdKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uKTtcclxuICAgICAgICByZXN0T25lID0gZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uO1xyXG4gICAgICAgIHJldHVybiByZXN0T25lO1xyXG4gICAgICAgIC8vMzogdGhlbiBpbml0aWFsaXNlIHRoZSBtYXAgd2l0aCB0aGUgY29ycmVjdCBtYXJrZXJzXHJcbiAgICB9KSkudGhlbigoKSA9PiBpbml0TWFwKGxvY2F0aW9uLCB0b3BSZXN0YXVyYW50cywgcmVzdE9uZSkpO1xyXG59XHJcblxyXG4vL2ludGl0aWFsIG1hcCBvbiB0aGUgcGFnZVxyXG5nZW5lcmF0ZU5ld01hcChMb25kb24pO1xyXG5cclxuLy8gQnV0dG9uIGZ1bmN0aW9uYWxpdHkgZm9yIGNoYW5naW5nIHRoZSBtYXAgZm9yIGEgbmV3IGNpdHlcclxuXHJcbmNvbnN0IHBhcmlzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXJpcy1idXR0b25cIik7XHJcbnBhcmlzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBnZW5lcmF0ZU5ld01hcChQYXJpcykpO1xyXG5cclxuY29uc3QgbG9uZG9uQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb25kb24tYnV0dG9uXCIpO1xyXG5sb25kb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGdlbmVyYXRlTmV3TWFwKExvbmRvbikpO1xyXG5cclxuY29uc3Qgc2VvdWxCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlb3VsLWJ1dHRvblwiKTtcclxuc2VvdWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGdlbmVyYXRlTmV3TWFwKFNlb3VsKSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwiLy9mdW5jdGlvbiB0byBjaGFuZ2UgdGhlIGFkZHJlc3Mgb2Ygc29tZXRoaW5nIGludG8gYSBsYXQgYW5kIGxvbmdcclxuXHJcbi8vdGFrZXMgaW4gYWRkcmVzcyAxLCBhZGRyZXNzIDIsIGFuZCBjb3VudHJ5XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0TGF0TG9uZyA9IGFzeW5jIChyZXN0YXVyYW50KTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IHNlYXJjaFN0cmluZyA9IGAke3Jlc3RhdXJhbnQuYWRkcmVzczF9KyR7cmVzdGF1cmFudC5hZGRyZXNzMn0rJHtyZXN0YXVyYW50LmNvdW50cnl9YDtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/YWRkcmVzcz0ke3NlYXJjaFN0cmluZ30ma2V5PUFJemFTeUNWRjBNUi1VSzdYNUlSYll6eFNMTTZCOTIxTmJab0ZuTWApO1xyXG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=