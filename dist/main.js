!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var r=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,u)}c((r=r.apply(e,n||[])).next())}))},o=function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},a=function(e){return r(void 0,void 0,void 0,(function(){var n,t;return o(this,(function(r){switch(r.label){case 0:return n=e.lat,t=e.lng,[4,fetch("https://www.vegguide.org/search/by-lat-long/"+n+","+t)];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()]}}))}))},i=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,u)}c((r=r.apply(e,n||[])).next())}))},u=function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},c={name:"London",lat:51.5033,lng:-.1195},l={name:"Paris",lat:48.8566,lng:2.3522},s={name:"Seoul",lat:37.5665,lng:126.978},f=function(e,n){document.getElementById("restaurants").innerHTML="<h2>Showing restaurants in: "+n.name+"</h2><p>1: "+e[0].name+": "+e[0].short_description+" </p><p>2: "+e[1].name+": "+e[1].short_description+"</p><p>3: "+e[2].name+": "+e[2].short_description+"</p><p>4. "+e[3].name+": "+e[3].short_description+"</p><p>5. "+e[4].name+": "+e[4].short_description+"</p>"};a(c).then((function(e){console.log(e);var n=e.entries.splice(0,5);console.log(n),f(n,c)}));var p=function(e){var n;a(e).then((function(t){var r;console.log(t),n=t.entries.splice(0,5),console.log(n),f(n,e),(r=n[0],i(void 0,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=r.address1+"+"+r.address2+"+"+r.country,[4,fetch("https://maps.googleapis.com/maps/api/geocode/json?address="+e+"&key=AIzaSyCVF0MR-UK7X5IRbYzxSLM6B921NbZoFnM")];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))}))).then((function(e){console.log(e.results[0].geometry.location)}))})),function(e,n){var t=new google.maps.Map(document.getElementById("map"),{zoom:11,center:e});new google.maps.Marker({position:e,map:t}),new google.maps.Marker({position:e,map:t}),new google.maps.Marker({position:e,map:t}),new google.maps.Marker({position:e,map:t}),new google.maps.Marker({position:e,map:t})}(e)};p(c),document.getElementById("paris-button").addEventListener("click",(function(){return p(l)})),document.getElementById("london-button").addEventListener("click",(function(){return p(c)})),document.getElementById("seoul-button").addEventListener("click",(function(){return p(s)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21hcHMvbWFwcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdmVnZ2llLWFwaS92ZWdnaWUtZGF0YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFwcy9nZW9jb2Rlci50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImdldFZlZ2dpZVJlc3RhdXJhbnRzIiwibG9jYXRpb24iLCJsYXRpdHVkZSIsImxhdCIsImxvbmdpdHVkZSIsImxuZyIsImZldGNoIiwianNvbiIsIkxvbmRvbiIsIlBhcmlzIiwiU2VvdWwiLCJ1cGRhdGVIdG1sIiwidG9wUmVzdGF1cmFudHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwic2hvcnRfZGVzY3JpcHRpb24iLCJ0aGVuIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJlbnRyaWVzIiwic3BsaWNlIiwiZ2VuZXJhdGVOZXdNYXAiLCJyZXN0YXVyYW50Iiwic2VhcmNoU3RyaW5nIiwiYWRkcmVzczEiLCJhZGRyZXNzMiIsImNvdW50cnkiLCJyZXN1bHRzIiwiZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsInJlc3RhdXJhbnRzIiwibWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsInpvb20iLCJjZW50ZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImluaXRNYXAiLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVB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SSxPQUFPLENBQUNDLFNBQVVULEVBQWFFLElBQUtBLElBQ3JELElBQUlDLE9BQU9DLEtBQUtJLE9BQU8sQ0FBQ0MsU0FBVVQsRUFBYUUsSUFBS0EsSUFDcEQsSUFBSUMsT0FBT0MsS0FBS0ksT0FBTyxDQUFDQyxTQUFVVCxFQUFhRSxJQUFLQSxJRXNDdkZRLENBQVF4QyxJQUtac0IsRUFBZWYsR0FJS0ssU0FBU0MsZUFBZSxnQkFDaEM0QixpQkFBaUIsU0FBUyxXQUFNLE9BQUFuQixFQUFlZCxNQUV0Q0ksU0FBU0MsZUFBZSxpQkFDaEM0QixpQkFBaUIsU0FBUyxXQUFNLE9BQUFuQixFQUFlZixNQUV4Q0ssU0FBU0MsZUFBZSxnQkFDaEM0QixpQkFBaUIsU0FBUyxXQUFNLE9BQUFuQixFQUFlYiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHt9IGZyb20gJ2dvb2dsZW1hcHMnO1xyXG5pbXBvcnQgeyBzdHlsZXMgfSBmcm9tICcuL21hcHMtZGF0YSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElMb2NhdGlvbiB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGxhdDogbnVtYmVyLFxyXG4gIGxuZzogbnVtYmVyXHJcbn1cclxuXHJcbi8vSW5pdGlhbGlzaW5nIGEgbWFwIGZ1bmN0aW9uXHJcblxyXG5leHBvcnQgY29uc3QgaW5pdE1hcCA9IChjb29yZGluYXRlczogSUxvY2F0aW9uLCByZXN0YXVyYW50cyk6IGdvb2dsZS5tYXBzLk1hcCA9PiB7XHJcbiAgbGV0IG1hcDogZ29vZ2xlLm1hcHMuTWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwgXHJcbiAgICB7IHpvb206IDExLCBcclxuICAgICAgY2VudGVyOiBjb29yZGluYXRlc1xyXG4gICAgfVxyXG4gICk7XHJcbiAgbGV0IG1hcmtlck9uZTogZ29vZ2xlLm1hcHMuTWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7cG9zaXRpb246IGNvb3JkaW5hdGVzLCBtYXA6IG1hcH0pO1xyXG4gIGxldCBtYXJrZXJUd286IGdvb2dsZS5tYXBzLk1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe3Bvc2l0aW9uOiBjb29yZGluYXRlcywgbWFwOiBtYXB9KTtcclxuICBsZXQgbWFya2VyVGhyZWU6IGdvb2dsZS5tYXBzLk1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe3Bvc2l0aW9uOiBjb29yZGluYXRlcywgbWFwOiBtYXB9KTtcclxuICBsZXQgbWFya2VyRm91cjogZ29vZ2xlLm1hcHMuTWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7cG9zaXRpb246IGNvb3JkaW5hdGVzLCBtYXA6IG1hcH0pO1xyXG4gIGxldCBtYXJrZXJGaXZlOiBnb29nbGUubWFwcy5NYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtwb3NpdGlvbjogY29vcmRpbmF0ZXMsIG1hcDogbWFwfSk7XHJcbiAgcmV0dXJuIG1hcDtcclxufSIsImltcG9ydCB7IElMb2NhdGlvbiB9IGZyb20gXCIuLi9tYXBzL21hcHNcIjtcclxuXHJcbi8vIFJlcXVlc3QgZnVudGNpb24gdXNpbmcgdGhlIFZlZyBHdWlkZSBBUElcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRWZWdnaWVSZXN0YXVyYW50cyA9IGFzeW5jIChsb2NhdGlvbjpJTG9jYXRpb24pOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbGF0aXR1ZGUgPSBsb2NhdGlvbi5sYXQ7XHJcbiAgICBjb25zdCBsb25naXR1ZGUgPSBsb2NhdGlvbi5sbmc7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL3d3dy52ZWdndWlkZS5vcmcvc2VhcmNoL2J5LWxhdC1sb25nLyR7bGF0aXR1ZGV9LCR7bG9uZ2l0dWRlfWApO1xyXG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG4vLyBTRUUgbWFpbi50cyBmb3IgcmVwb25zZVxyXG5cclxuXHJcbiIsImltcG9ydCB7IElMb2NhdGlvbiwgaW5pdE1hcCB9IGZyb20gJy4vbWFwcy9tYXBzJztcclxuaW1wb3J0IHsgZ2V0VmVnZ2llUmVzdGF1cmFudHMgfSBmcm9tICcuL3ZlZ2dpZS1hcGkvdmVnZ2llLWRhdGEnO1xyXG5pbXBvcnQgeyBnZXRMYXRMb25nIH0gZnJvbSAnLi9tYXBzL2dlb2NvZGVyJztcclxuXHJcbi8vbG9jYXRpb25zXHJcbmNvbnN0IExvbmRvbjogSUxvY2F0aW9uID0ge25hbWU6IFwiTG9uZG9uXCIsIGxhdDogNTEuNTAzMywgbG5nOiAtMC4xMTk1fTtcclxuY29uc3QgUGFyaXM6IElMb2NhdGlvbiA9IHtuYW1lOiBcIlBhcmlzXCIsIGxhdDogNDguODU2NiwgbG5nOiAyLjM1MjJ9O1xyXG5jb25zdCBTZW91bDogSUxvY2F0aW9uID0ge25hbWU6IFwiU2VvdWxcIiwgbGF0OiAzNy41NjY1LCBsbmc6IDEyNi45NzgwfTtcclxuLy8gY29uc3QgaG9tZTogSUxvY2F0aW9uID0ge25hbWU6IFwiaG9tZVwiLCBsYXQ6IDUxLjMzMDA2NDMsIGxuZzogLTAuNTYzMTEyMX07XHJcblxyXG4vL2Z1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgaHRtbCB3aXRoIG5ldyByZXN0YXVyYW50c1xyXG5jb25zdCB1cGRhdGVIdG1sID0gKHRvcFJlc3RhdXJhbnRzLCBsb2NhdGlvbjpJTG9jYXRpb24pID0+IHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdGF1cmFudHNcIikuaW5uZXJIVE1MID0gYDxoMj5TaG93aW5nIHJlc3RhdXJhbnRzIGluOiAke2xvY2F0aW9uLm5hbWV9PC9oMj48cD4xOiAke3RvcFJlc3RhdXJhbnRzWzBdLm5hbWV9OiAke3RvcFJlc3RhdXJhbnRzWzBdLnNob3J0X2Rlc2NyaXB0aW9ufSA8L3A+PHA+MjogJHt0b3BSZXN0YXVyYW50c1sxXS5uYW1lfTogJHt0b3BSZXN0YXVyYW50c1sxXS5zaG9ydF9kZXNjcmlwdGlvbn08L3A+PHA+MzogJHt0b3BSZXN0YXVyYW50c1syXS5uYW1lfTogJHt0b3BSZXN0YXVyYW50c1syXS5zaG9ydF9kZXNjcmlwdGlvbn08L3A+PHA+NC4gJHt0b3BSZXN0YXVyYW50c1szXS5uYW1lfTogJHt0b3BSZXN0YXVyYW50c1szXS5zaG9ydF9kZXNjcmlwdGlvbn08L3A+PHA+NS4gJHt0b3BSZXN0YXVyYW50c1s0XS5uYW1lfTogJHt0b3BSZXN0YXVyYW50c1s0XS5zaG9ydF9kZXNjcmlwdGlvbn08L3A+YFxyXG59XHJcblxyXG4vLyBHZXQgdGhlIHJlc3RhdXJhbnRzIGZvciBhIHNwZWNpZmljIGFyZWFcclxuZ2V0VmVnZ2llUmVzdGF1cmFudHMoTG9uZG9uKS50aGVuKChkYXRhKSA9PiB7XHJcblxyXG4gICAgLy8gUmVzcG9uc2UgZGF0YSBmcm9tIHRoZSB2ZWdnaWUgcmVzdGFyYW50cyBBUElcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgY29uc3QgdG9wUmVzdGF1cmFudHMgPSBkYXRhLmVudHJpZXMuc3BsaWNlKDAsNSk7XHJcbiAgICBjb25zb2xlLmxvZyh0b3BSZXN0YXVyYW50cyk7XHJcblxyXG4gICAgLy91cGRhdGluZyBodG1sIG9uIHRoZSBwYWdlXHJcbiAgICB1cGRhdGVIdG1sKHRvcFJlc3RhdXJhbnRzLCBMb25kb24pO1xyXG59KTtcclxuXHJcbi8vZnVuY3Rpb24gdG8gZ2VuZXJhdGUgbWFwIGFuZCB1cGRhdGUgdGhlIGh0bWwgZm9yIGEgbmV3IGxvY2F0aW9uOlxyXG5cclxuY29uc3QgZ2VuZXJhdGVOZXdNYXAgPSAobG9jYXRpb246IElMb2NhdGlvbikgPT4ge1xyXG4gICAgbGV0IHRvcFJlc3RhdXJhbnRzO1xyXG4gICAgZ2V0VmVnZ2llUmVzdGF1cmFudHMobG9jYXRpb24pLnRoZW4oKGRhdGEpID0+IHtcclxuXHJcbiAgICAgICAgLy8gUmVzcG9uc2UgZGF0YSBmcm9tIHRoZSB2ZWdnaWUgcmVzdGFyYW50cyBBUElcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB0b3BSZXN0YXVyYW50cyA9IGRhdGEuZW50cmllcy5zcGxpY2UoMCw1KTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0b3BSZXN0YXVyYW50cyk7XHJcbiAgICBcclxuICAgICAgICAvL3VwZGF0aW5nIGh0bWwgb24gdGhlIHBhZ2VcclxuICAgICAgICB1cGRhdGVIdG1sKHRvcFJlc3RhdXJhbnRzLCBsb2NhdGlvbik7XHJcblxyXG4gICAgICAgIC8vZ2V0IGxhdCBhbmQgbG9uZyBmb3IgZWFjaCByZXN0YXVyYW50IFxyXG4gICAgICAgIC8vZ2VvY29kZXIgYXBpIHJlcXVlc3RcclxuICAgICAgICBnZXRMYXRMb25nKHRvcFJlc3RhdXJhbnRzWzBdKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gUmVzcG9uc2UgZGF0YSBmcm9tIHRoZSAgQVBJXHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uKTtcclxuICAgICAgICAvL3Jlc3VsdHMgaW4gdGhlIGZvcm0gb2YgZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCBhbmQgZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxuZ1xyXG5cclxuICAgICAgICAvL3RyeSB0byB0dXJuIHRoaXMgaW50byBhbiBhcnJheSBcclxuICAgICAgICAvLyBjb25zdCBhZGRyZXNzQXJyYXkgPSB0b3BSZXN0YXVyYW50cy5tYXAoKHJlc3RhdXJhbnQpID0+IHtcclxuICAgICAgICAvLyAgICAgZ2V0TGF0TG9uZyhyZXN0YXVyYW50KS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBSZXNwb25zZSBkYXRhIGZyb20gdGhlICBBUElcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBkYXRhLnJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb247XHJcbiAgICAgICAgLy8gICAgICAgICAvL3Jlc3VsdHMgaW4gdGhlIGZvcm0gb2YgZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCBhbmQgZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxuZ1xyXG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uKTtcclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gfSlcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhhZGRyZXNzQXJyYXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBpbml0TWFwKGxvY2F0aW9uLCB0b3BSZXN0YXVyYW50cyk7XHJcbn1cclxuXHJcblxyXG4vL2ludGl0aWFsIG1hcCBvbiB0aGUgcGFnZVxyXG5nZW5lcmF0ZU5ld01hcChMb25kb24pO1xyXG5cclxuLy8gQnV0dG9uIGZ1bmN0aW9uYWxpdHkgZm9yIGNoYW5naW5nIHRoZSBtYXAgZm9yIGEgbmV3IGNpdHlcclxuXHJcbmNvbnN0IHBhcmlzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXJpcy1idXR0b25cIik7XHJcbnBhcmlzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBnZW5lcmF0ZU5ld01hcChQYXJpcykpO1xyXG5cclxuY29uc3QgbG9uZG9uQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb25kb24tYnV0dG9uXCIpO1xyXG5sb25kb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGdlbmVyYXRlTmV3TWFwKExvbmRvbikpO1xyXG5cclxuY29uc3Qgc2VvdWxCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlb3VsLWJ1dHRvblwiKTtcclxuc2VvdWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGdlbmVyYXRlTmV3TWFwKFNlb3VsKSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwiLy9mdW5jdGlvbiB0byBjaGFuZ2UgdGhlIGFkZHJlc3Mgb2Ygc29tZXRoaW5nIGludG8gYSBsYXQgYW5kIGxvbmdcclxuXHJcbi8vdGFrZXMgaW4gYWRkcmVzcyAxLCBhZGRyZXNzIDIsIGFuZCBjb3VudHJ5XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0TGF0TG9uZyA9IGFzeW5jIChyZXN0YXVyYW50KTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICAgIGNvbnN0IHNlYXJjaFN0cmluZyA9IGAke3Jlc3RhdXJhbnQuYWRkcmVzczF9KyR7cmVzdGF1cmFudC5hZGRyZXNzMn0rJHtyZXN0YXVyYW50LmNvdW50cnl9YDtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/YWRkcmVzcz0ke3NlYXJjaFN0cmluZ30ma2V5PUFJemFTeUNWRjBNUi1VSzdYNUlSYll6eFNMTTZCOTIxTmJab0ZuTWApO1xyXG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG5cclxuLy8gZXhwb3J0IGNvbnN0IGdldExhdExvbmcgPSBhc3luYyAodG9wUmVzdGF1cmFudHMpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4vLyAgICAgbGV0IHJlc3RhdXJhbnRzQWRkcmVzc2VzID0gdG9wUmVzdGF1cmFudHMubWFwKGFzeW5jIChyZXN0YXVyYW50KSA9PiB7XHJcbi8vICAgICAgICAgY29uc3Qgc2VhcmNoU3RyaW5nID0gYCR7cmVzdGF1cmFudC5hZGRyZXNzT25lfSske3Jlc3RhdXJhbnQuYWRkcmVzc1R3b30rJHtyZXN0YXVyYW50LmNvdW50cnl9YDtcclxuLy8gICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uP2FkZHJlc3M9JHtzZWFyY2hTdHJpbmd9JmtleT1BSXphU3lDVkYwTVItVUs3WDVJUmJZenhTTE02QjkyMU5iWm9Gbk1gKTtcclxuLy8gICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpLnRoZW4oKS50aGVuKGRhdGEgPT4gZGF0YSk7XHJcbi8vICAgICB9KVxyXG4vLyAgICAgcmV0dXJuIHJlc3RhdXJhbnRzQWRkcmVzc2VzO1xyXG4vLyB9XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=