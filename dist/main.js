!function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){"use strict";t.r(e);var r=function(n){var e=new google.maps.Map(document.getElementById("map"),{zoom:11,center:n});new google.maps.Marker({position:n,map:e});return e},o=function(n,e,t,r){return new(t||(t=Promise))((function(o,i){function a(n){try{c(r.next(n))}catch(n){i(n)}}function u(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,u)}c((r=r.apply(n,e||[])).next())}))},i=function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(n,a)}catch(n){i=[6,n],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=function(n){return o(void 0,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:return e=n.lat,t=n.lng,[4,fetch("https://www.vegguide.org/search/by-lat-long/"+e+","+t)];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()]}}))}))},u=function(n,e,t,r){return new(t||(t=Promise))((function(o,i){function a(n){try{c(r.next(n))}catch(n){i(n)}}function u(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,u)}c((r=r.apply(n,e||[])).next())}))},c=function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(n,a)}catch(n){i=[6,n],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},l={name:"London",lat:51.5033,lng:-.1195},s={name:"Paris",lat:48.8566,lng:2.3522},f={name:"Seoul",lat:37.5665,lng:126.978};r({name:"home",lat:51.3300643,lng:-.5631121});var p=function(n,e){document.getElementById("restaurants").innerHTML="<h2>Showing restaurants in: "+e.name+"</h2><p>1: "+n[0].name+": "+n[0].short_description+" </p><p>2: "+n[1].name+": "+n[1].short_description+"</p><p>3: "+n[2].name+": "+n[2].short_description+"</p><p>4. "+n[3].name+": "+n[3].short_description+"</p><p>5. "+n[4].name+": "+n[4].short_description+"</p>"};a(l).then((function(n){console.log(n);var e=n.entries.splice(0,5);console.log(e),p(e,l)}));var d,h,b,y=function(n){r(n),a(n).then((function(e){console.log(e);var t=e.entries.splice(0,5);console.log(t),p(t,n)}))};document.getElementById("paris-button").addEventListener("click",(function(){return y(s)})),document.getElementById("london-button").addEventListener("click",(function(){return y(l)})),document.getElementById("seoul-button").addEventListener("click",(function(){return y(f)})),(d="10 fairlawn park",h="woking",b="united kingdom",u(void 0,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return d.split(" ").join("+"),h.split(" ").join("+"),b.split(" ").join("+"),[4,fetch("https://maps.googleapis.com/maps/api/geocode/json?address="+d+"+"+h+"+"+b+"&key=AIzaSyCVF0MR-UK7X5IRbYzxSLM6B921NbZoFnM")];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))}))).then((function(n){console.log(n)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21hcHMvbWFwcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdmVnZ2llLWFwaS92ZWdnaWUtZGF0YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFwcy9nZW9jb2Rlci50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImluaXRNYXAiLCJjb29yZGluYXRlcyIsIm1hcCIsImdvb2dsZSIsIm1hcHMiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiem9vbSIsImNlbnRlciIsIk1hcmtlciIsInBvc2l0aW9uIiwiZ2V0VmVnZ2llUmVzdGF1cmFudHMiLCJsb2NhdGlvbiIsImxhdGl0dWRlIiwibGF0IiwibG9uZ2l0dWRlIiwibG5nIiwiZmV0Y2giLCJqc29uIiwiTG9uZG9uIiwiUGFyaXMiLCJTZW91bCIsInVwZGF0ZUh0bWwiLCJ0b3BSZXN0YXVyYW50cyIsImlubmVySFRNTCIsInNob3J0X2Rlc2NyaXB0aW9uIiwidGhlbiIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwiZW50cmllcyIsInNwbGljZSIsImFkZHJlc3NPbmUiLCJhZGRyZXNzVHdvIiwi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LE1BQU0sS0FBS0MsS0FBSyxLQUM5QkosRUFBUUcsTUFBTSxLQUFLQyxLQUFLLEtBRTFCLEdBQU1yQixNQUFNLDZEQURMZSxFQUFVLElBQUlDLEVBQVUsSUFBSUMsRUFDa0QsaUQsT0FDL0YsU0FEVSxTQUNLaEIsUSxPQUF0QixNQUFPLENBQVAsRUFBTyxrQkRnRDhDUSxNQUFLLFNBQUNDLEdBRTNEQyxRQUFRQyxJQUFJRiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHt9IGZyb20gJ2dvb2dsZW1hcHMnO1xyXG5pbXBvcnQgeyBzdHlsZXMgfSBmcm9tICcuL21hcHMtZGF0YSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElMb2NhdGlvbiB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGxhdDogbnVtYmVyLFxyXG4gIGxuZzogbnVtYmVyXHJcbn1cclxuXHJcbi8vSW5pdGlhbGlzaW5nIGEgbWFwIGZ1bmN0aW9uXHJcblxyXG5leHBvcnQgY29uc3QgaW5pdE1hcCA9IChjb29yZGluYXRlczogSUxvY2F0aW9uKTogZ29vZ2xlLm1hcHMuTWFwID0+IHtcclxuICBsZXQgbWFwOiBnb29nbGUubWFwcy5NYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCBcclxuICAgIHsgem9vbTogMTEsIFxyXG4gICAgICBjZW50ZXI6IGNvb3JkaW5hdGVzXHJcbiAgICB9XHJcbiAgKTtcclxuICBsZXQgbWFya2VyT25lOiBnb29nbGUubWFwcy5NYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtwb3NpdGlvbjogY29vcmRpbmF0ZXMsIG1hcDogbWFwfSk7XHJcbiAgcmV0dXJuIG1hcDtcclxufSIsImltcG9ydCB7IElMb2NhdGlvbiB9IGZyb20gXCIuLi9tYXBzL21hcHNcIjtcclxuXHJcbi8vIFJlcXVlc3QgZnVudGNpb24gdXNpbmcgdGhlIFZlZyBHdWlkZSBBUElcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRWZWdnaWVSZXN0YXVyYW50cyA9IGFzeW5jIChsb2NhdGlvbjpJTG9jYXRpb24pOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbGF0aXR1ZGUgPSBsb2NhdGlvbi5sYXQ7XHJcbiAgICBjb25zdCBsb25naXR1ZGUgPSBsb2NhdGlvbi5sbmc7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL3d3dy52ZWdndWlkZS5vcmcvc2VhcmNoL2J5LWxhdC1sb25nLyR7bGF0aXR1ZGV9LCR7bG9uZ2l0dWRlfWApO1xyXG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG4vLyBTRUUgbWFpbi50cyBmb3IgcmVwb25zZVxyXG5cclxuXHJcbiIsImltcG9ydCB7IElMb2NhdGlvbiwgaW5pdE1hcCB9IGZyb20gJy4vbWFwcy9tYXBzJztcclxuaW1wb3J0IHsgZ2V0VmVnZ2llUmVzdGF1cmFudHMgfSBmcm9tICcuL3ZlZ2dpZS1hcGkvdmVnZ2llLWRhdGEnO1xyXG5pbXBvcnQgeyBnZXRMYXRMb25nIH0gZnJvbSAnLi9tYXBzL2dlb2NvZGVyJztcclxuXHJcbi8vbG9jYXRpb25zXHJcbmNvbnN0IExvbmRvbjogSUxvY2F0aW9uID0ge25hbWU6IFwiTG9uZG9uXCIsIGxhdDogNTEuNTAzMywgbG5nOiAtMC4xMTk1fTtcclxuY29uc3QgUGFyaXM6IElMb2NhdGlvbiA9IHtuYW1lOiBcIlBhcmlzXCIsIGxhdDogNDguODU2NiwgbG5nOiAyLjM1MjJ9O1xyXG5jb25zdCBTZW91bDogSUxvY2F0aW9uID0ge25hbWU6IFwiU2VvdWxcIiwgbGF0OiAzNy41NjY1LCBsbmc6IDEyNi45NzgwfTtcclxuY29uc3QgaG9tZTogSUxvY2F0aW9uID0ge25hbWU6IFwiaG9tZVwiLCBsYXQ6IDUxLjMzMDA2NDMsIGxuZzogLTAuNTYzMTEyMX07XHJcblxyXG4vL2ludGl0aWFsIG1hcCBvbiB0aGUgcGFnZVxyXG5pbml0TWFwKGhvbWUpO1xyXG5cclxuLy9mdW5jdGlvbiB0byB1cGRhdGUgdGhlIGh0bWwgd2l0aCBuZXcgcmVzdGF1cmFudHNcclxuY29uc3QgdXBkYXRlSHRtbCA9ICh0b3BSZXN0YXVyYW50cywgbG9jYXRpb246SUxvY2F0aW9uKSA9PiB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3RhdXJhbnRzXCIpLmlubmVySFRNTCA9IGA8aDI+U2hvd2luZyByZXN0YXVyYW50cyBpbjogJHtsb2NhdGlvbi5uYW1lfTwvaDI+PHA+MTogJHt0b3BSZXN0YXVyYW50c1swXS5uYW1lfTogJHt0b3BSZXN0YXVyYW50c1swXS5zaG9ydF9kZXNjcmlwdGlvbn0gPC9wPjxwPjI6ICR7dG9wUmVzdGF1cmFudHNbMV0ubmFtZX06ICR7dG9wUmVzdGF1cmFudHNbMV0uc2hvcnRfZGVzY3JpcHRpb259PC9wPjxwPjM6ICR7dG9wUmVzdGF1cmFudHNbMl0ubmFtZX06ICR7dG9wUmVzdGF1cmFudHNbMl0uc2hvcnRfZGVzY3JpcHRpb259PC9wPjxwPjQuICR7dG9wUmVzdGF1cmFudHNbM10ubmFtZX06ICR7dG9wUmVzdGF1cmFudHNbM10uc2hvcnRfZGVzY3JpcHRpb259PC9wPjxwPjUuICR7dG9wUmVzdGF1cmFudHNbNF0ubmFtZX06ICR7dG9wUmVzdGF1cmFudHNbNF0uc2hvcnRfZGVzY3JpcHRpb259PC9wPmBcclxufVxyXG5cclxuLy8gR2V0IHRoZSByZXN0YXVyYW50cyBmb3IgYSBzcGVjaWZpYyBhcmVhXHJcbmdldFZlZ2dpZVJlc3RhdXJhbnRzKExvbmRvbikudGhlbigoZGF0YSkgPT4ge1xyXG5cclxuICAgIC8vIFJlc3BvbnNlIGRhdGEgZnJvbSB0aGUgdmVnZ2llIHJlc3RhcmFudHMgQVBJXHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgIGNvbnN0IHRvcFJlc3RhdXJhbnRzID0gZGF0YS5lbnRyaWVzLnNwbGljZSgwLDUpO1xyXG4gICAgY29uc29sZS5sb2codG9wUmVzdGF1cmFudHMpO1xyXG5cclxuICAgIC8vdXBkYXRpbmcgaHRtbCBvbiB0aGUgcGFnZVxyXG4gICAgdXBkYXRlSHRtbCh0b3BSZXN0YXVyYW50cywgTG9uZG9uKTtcclxufSk7XHJcblxyXG4vL2Z1bmN0aW9uIHRvIGdlbmVyYXRlIG1hcCBhbmQgdXBkYXRlIHRoZSBodG1sIGZvciBhIG5ldyBsb2NhdGlvbjpcclxuXHJcbmNvbnN0IGdlbmVyYXRlTmV3TWFwID0gKGxvY2F0aW9uOiBJTG9jYXRpb24pID0+IHtcclxuICAgIGluaXRNYXAobG9jYXRpb24pO1xyXG4gICAgZ2V0VmVnZ2llUmVzdGF1cmFudHMobG9jYXRpb24pLnRoZW4oKGRhdGEpID0+IHtcclxuXHJcbiAgICAgICAgLy8gUmVzcG9uc2UgZGF0YSBmcm9tIHRoZSB2ZWdnaWUgcmVzdGFyYW50cyBBUElcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICBjb25zdCB0b3BSZXN0YXVyYW50cyA9IGRhdGEuZW50cmllcy5zcGxpY2UoMCw1KTtcclxuICAgICAgICBjb25zb2xlLmxvZyh0b3BSZXN0YXVyYW50cyk7XHJcbiAgICBcclxuICAgICAgICAvL3VwZGF0aW5nIGh0bWwgb24gdGhlIHBhZ2VcclxuICAgICAgICB1cGRhdGVIdG1sKHRvcFJlc3RhdXJhbnRzLCBsb2NhdGlvbik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gQnV0dG9uIGZ1bmN0aW9uYWxpdHkgZm9yIGNoYW5naW5nIHRoZSBtYXAgZm9yIGEgbmV3IGNpdHlcclxuXHJcbmNvbnN0IHBhcmlzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXJpcy1idXR0b25cIik7XHJcbnBhcmlzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBnZW5lcmF0ZU5ld01hcChQYXJpcykpO1xyXG5cclxuY29uc3QgbG9uZG9uQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb25kb24tYnV0dG9uXCIpO1xyXG5sb25kb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGdlbmVyYXRlTmV3TWFwKExvbmRvbikpO1xyXG5cclxuY29uc3Qgc2VvdWxCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlb3VsLWJ1dHRvblwiKTtcclxuc2VvdWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGdlbmVyYXRlTmV3TWFwKFNlb3VsKSk7XHJcblxyXG4vL2dlb2NvZGVyIGFwaSByZXF1ZXN0XHJcbmdldExhdExvbmcoXCIxMCBmYWlybGF3biBwYXJrXCIsXCJ3b2tpbmdcIixcInVuaXRlZCBraW5nZG9tXCIpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgIC8vIFJlc3BvbnNlIGRhdGEgZnJvbSB0aGUgIEFQSVxyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG4iLCIvL2Z1bmN0aW9uIHRvIGNoYW5nZSB0aGUgYWRkcmVzcyBvZiBzb21ldGhpbmcgaW50byBhIGxhdCBhbmQgbG9uZ1xyXG5cclxuLy90YWtlcyBpbiBhZGRyZXNzIDEsIGFkZHJlc3MgMiwgYW5kIGNvdW50cnlcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRMYXRMb25nID0gYXN5bmMgKGFkZHJlc3NPbmU6c3RyaW5nLCBhZGRyZXNzVHdvOnN0cmluZywgY291bnRyeTpzdHJpbmcpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbmV3QWRkcmVzc09uZSA9IGFkZHJlc3NPbmUuc3BsaXQoJyAnKS5qb2luKCcrJyk7XHJcbiAgICBjb25zdCBuZXdBZGRyZXNzVHdvID0gYWRkcmVzc1R3by5zcGxpdCgnICcpLmpvaW4oJysnKTtcclxuICAgIGNvbnN0IG5ld0NvdW50cnkgPSBjb3VudHJ5LnNwbGl0KCcgJykuam9pbignKycpO1xyXG4gICAgY29uc3Qgc2VhcmNoU3RyaW5nID0gYCR7YWRkcmVzc09uZX0rJHthZGRyZXNzVHdvfSske2NvdW50cnl9YDtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/YWRkcmVzcz0ke3NlYXJjaFN0cmluZ30ma2V5PUFJemFTeUNWRjBNUi1VSzdYNUlSYll6eFNMTTZCOTIxTmJab0ZuTWApO1xyXG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9